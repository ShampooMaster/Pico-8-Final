pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

-- variables

basket_sprite=1
player_sprite=2

player_x=64
player_y=100

balls={}
ball_start=16
ball_count=6
ball_interval=16

gravity=1
level=1
points=0

function _init()
    for i=1,level do
        ball={
            sprite=flr(rnd(ball_count)+ball_start),
            x=flr(rnd(120)+5),
            y=i*(-ball_interval)
        }
        add(balls,ball)
    end
end

function _update()
    if btn(0) then player_x-=2 end
    if btn(1) then player_x+=2 end

    for ball in all(balls) do
        ball.y+=gravity

        if  ball.y+4>=player_y-8
        and ball.y+4<=player_y
        and ball.x+4>=player_x
        and ball.x+4<=player_x+8 then
            points+=1
            del(balls,ball)
            sfx(0)
        end

        if ball.y>100 then
            del(balls,ball)
            sfx(1)
        end
    end

    if #balls==0 then
        level+=1
        _init()
    end
end

function _draw()
    cls()
    rectfill(0,108,127,127,3)
    spr(player_sprite,player_x,player_y)
    spr(basket_sprite,player_x,player_y-8)

    for ball in all(balls) do
        spr(ball.sprite,ball.x,ball.y)
    end

    print("score= "..points)
end

music(0)

__gfx__
00000000000000000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088888800006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700806060680006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088888800006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000070707000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007070700006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000070707000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007070700665555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
009599000000044400777700007676000076770000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000
05a6a9500044474208e777700767676005577750077aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000
9a65559404447442777e77867676767d75576776aaa7aa7900000000000000000000000000000000000000000000000000000000000000000000000000000000
9a95995504474420777877866767676567777776aaa7aa6900000000000000000000000000000000000000000000000000000000000000000000000000000000
5655555404744420777877867676766d7776755daaa7aa6900000000000000000000000000000000000000000000000000000000000000000000000000000000
999599944744422077787786676767d57557755daaa7aa6900000000000000000000000000000000000000000000000000000000000000000000000000000000
09555540444222000887766006766d50055776d0076aa99000000000000000000000000000000000000000000000000000000000000000000000000000000000
00454400422000000066660000d5d5000066dd000099990000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000001550015500155001550015500155005550095500d5500d5500d5500d5400d5400d5300d5200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002000014150111500e1500b15009150061500415002150021400114001140011300113001130011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d1000201d7221d7221d7221d7221d7221d7221f7221f7221f7221f7221f7221f722187221872218722187221f7221f7221f7221f7221f7221f72221722217222172221722217222172224722217221f7221d722
1d1000001d7221d7221d7221d7221d7221d7221f7221f7221f7221f7221f7221f72218722187221872218722187221872218722187221872218722000000000000000000000000018722187221a7221d7221d722
011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 02424344
02 03424344

